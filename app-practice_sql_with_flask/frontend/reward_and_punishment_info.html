<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>å¥–æƒ©ä¿¡æ¯</title>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <script>
        create_api = 'http://localhost:5000/api/reward_and_punishment/create';
        delete_api = 'http://localhost:5000/api/work/delete_by_employee_id';
        find_api = 'http://localhost:5000/api/reward_and_punishment/find_by_employee_id';
        findall_api = 'http://localhost:5000/api/reward_and_punishment/findall';
        update_api = 'http://localhost:5000/api/reward_and_punishment/update_by_id';

        $(document).ready(function () {
            $("#create_button").click(function (message) {
                let employee_id = $("#employee_id").val();
                let statement = $("#statement").val();
                let date = $("#date").val();
                let location = $("#location").val();
                let request_data = {
                    'employee_id': employee_id,
                    'statement': statement,
                    'date': date,
                    'location': location,
                };
                if (employee_id !== '' && statement !== '' && date !== '' && location !== '') {
                    $.ajax({
                        type: "POST",
                        url: create_api,
                        data: JSON.stringify(request_data),
                        success: function (result) {
                            alert(result);
                        },
                        error: function (e) {
                            alert('error');
                        }
                    });
                } else {
                    alert('è¯·å¡«å†™æ–°å‘˜å·¥å¥–æƒ©ä¿¡æ¯çš„æ‰€æœ‰ä¿¡æ¯')
                }
            });

            $("#update_button").click(function (message) {
                let id = $("#id").val();
                let employee_id = $("#employee_id").val();
                let statement = $("#statement").val();
                let date = $("#date").val();
                let location = $("#location").val();
                let request_data = {
                    'id': id,
                    'employee_id': employee_id,
                    'statement': statement,
                    'date': date,
                    'location': location,
                };
                if (id !== '' && employee_id !== '' && statement !== '' && date !== '' && location !== '') {
                    $.ajax({
                        type: "POST",
                        url: update_api,
                        data: JSON.stringify(request_data),
                        success: function (result) {
                            alert(result);
                        },
                        error: function (e) {
                            alert('error');
                        }
                    });
                } else {
                    alert('è¯·å¡«å†™è¦æ›´æ–°å‘˜å·¥å¥–æƒ©ä¿¡æ¯çš„æ‰€æœ‰ä¿¡æ¯')
                }
            });

            $("#find_button").click(function (message) {
                let employee_id = $("#employee_id").val();
                let request_data = {
                    'employee_id': employee_id,
                };
                if (employee_id !== '') {
                    $.ajax({
                        type: "POST",
                        url: find_api,
                        data: JSON.stringify(request_data),
                        success: function (result) {
                            if (result.length !== 0) {
                                $('#notification').text('â—ä»¥ä¸‹æ˜¯æ‰€æœ‰å‘˜å·¥idä¸º ' + employee_id + ' çš„å‘˜å·¥çš„å¥–æƒ©ä¿¡æ¯ğŸ‘‡');
                                let output = '<table border="1"><tr><td>id</td><td>å‘˜å·¥id</td><td>å¥–æƒ©æè¿°</td><td>æ—¥æœŸ</td>' +
                                    '<td>åœ°ç‚¹</td>';
                                for (let i = 0; i < result.length; i++) {
                                    output += '<tr>';
                                    for (let j = 0; j < result[i].length; j++) {
                                        output += '<td>' + result[i][j] + '</td>';
                                    }
                                    output += '</tr>';
                                }
                                output += '</table>';
                                $('#content').html(output);
                            } else {
                                let output = '';
                                $('#content').html(output);
                                $('#notification').text('â—æœªæŸ¥æ‰¾åˆ°ä»»ä½•å‘˜å·¥idä¸º ' + employee_id + ' çš„å‘˜å·¥å¥–æƒ©ä¿¡æ¯');
                            }
                        },
                        error: function (e) {
                            alert('error');
                        }
                    });
                } else {
                    alert('å‘˜å·¥idå­—æ®µå¿…é¡»å¡«å†™ä»¥ç”¨äºæœç´¢')
                }
            });

            $("#findall_button").click(function (message) {
                $.ajax({
                        type: "POST",
                        url: findall_api,
                        success: function (result) {
                            if (result.length !== 0) {
                                $('#notification').text('â—ä»¥ä¸‹æ˜¯è¡¨ä¸­çš„æ‰€æœ‰å‘˜å·¥çš„å¥–æƒ©è®°å½•ğŸ‘‡');
                                let output = '<table border="1"><tr><td>id</td><td>å‘˜å·¥id</td><td>å¥–æƒ©æè¿°</td><td>æ—¥æœŸ</td>' +
                                    '<td>åœ°ç‚¹</td>';
                                for (let i = 0; i < result.length; i++) {
                                    output += '<tr>';
                                    for (let j = 0; j < result[i].length; j++) {
                                        output += '<td>' + result[i][j] + '</td>';
                                    }
                                    output += '</tr>';
                                }
                                output += '</table>';
                                $('#content').html(output);
                            } else {
                                let output = '';
                                $('#content').html(output);
                                $('#notification').text('â—æœªæŸ¥æ‰¾åˆ°ä»»ä½•å¥–æƒ©ä¿¡æ¯');
                            }
                        },
                        error: function (e) {
                            alert('error');
                        }
                    }
                );
            });
            $("#delete_button").click(function (message) {
                let id = $("#id").val();
                let request_data = {
                    'id': id,
                };
                if (id !== '') {
                    $.ajax({
                        type: "POST",
                        url: delete_api,
                        data: JSON.stringify(request_data),
                        success: function (result) {
                            alert(result);
                        },
                        error: function (e) {
                            alert('error');
                        }
                    });
                } else {
                    alert('è¯·å¡«å†™æƒ³è¦åˆ é™¤çš„æ•°æ®id')
                }
            });

        })
    </script>
</head>
<body>
<h1 style="text-align: center">å¥–æƒ©ä¿¡æ¯ç®¡ç†</h1>
<button onclick="window.location.href='/index.html'">è¿”å›ä¸»é¡µé¢</button>
<div>
    <div class="container">
        <h3>è¯·å¡«å†™ä¸‹è¡¨:</h3>
        <form action="#" id="adv-search-form" class="clearfix">
            <fieldset>
                æ•°æ®id:ã€€<input type="text" id="id" placeholder="æ•°æ®idï¼ˆåˆ›å»ºæ–°å¥–æƒ©è®°å½•æ—¶æ— éœ€å¡«å†™ï¼‰" size="50"><br>
                å‘˜å·¥id:ã€€<input type="text" id="employee_id" placeholder="å‘˜å·¥id" size="50"><br>
                å¥–æƒ©æè¿°:ã€€<input type="text" id="statement" placeholder="è¯¦ç»†å¥–æƒ©æè¿°" size="50"><br>
                æ—¶é—´:ã€€<input type="text" id="date" placeholder="å¥–æƒ©æ—¶é—´" size="50"><br>
                åœ°ç‚¹: <input type="text" id="location" placeholder="å¥–æƒ©åœ°ç‚¹" size="50"><br>
            </fieldset>
            <br>
            <button id="create_button">åˆ›å»ºæ–°å¥–æƒ©è®°å½•</button>
            <button id="delete_button">æ ¹æ®idåˆ é™¤å¥–æƒ©è®°å½•</button>
            <button id="update_button">æ ¹æ®æ•°æ®idæ›´æ–°å¥–æƒ©ä¿¡æ¯</button>
            <button id="find_button">æ ¹æ®å‘˜å·¥idæŸ¥æ‰¾å¥–æƒ©ä¿¡æ¯</button>
            <button id="findall_button">è·å–æ‰€æœ‰å¥–æƒ©ä¿¡æ¯</button>
        </form>
    </div>
</div>

<p id="notification"></p>
<dev id="content"></dev>

</body>
</html>